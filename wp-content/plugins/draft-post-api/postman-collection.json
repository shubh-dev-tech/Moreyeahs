{
	"info": {
		"_postman_id": "secure-draft-api-collection",
		"name": "Secure Draft Post API",
		"description": "WordPress Secure Draft Post API with JWT Authentication\n\nThis collection includes all endpoints for the secure draft post API:\n- Authentication to get JWT token\n- Create draft posts (JWT required)\n- Get user's draft posts (JWT required)\n\nSetup Instructions:\n1. Set the {{base_url}} variable to your WordPress site URL\n2. Run the 'Authenticate User' request first to get a JWT token\n3. The token will be automatically saved to {{jwt_token}} variable\n4. Use other requests with the saved token",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Authenticate User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Save JWT token to environment variable",
									"if (pm.response.code === 200) {",
									"    const responseJson = pm.response.json();",
									"    if (responseJson.success && responseJson.token) {",
									"        pm.environment.set('jwt_token', responseJson.token);",
									"        pm.environment.set('user_id', responseJson.user.id);",
									"        pm.environment.set('username', responseJson.user.username);",
									"        console.log('JWT token saved successfully');",
									"        console.log('User ID:', responseJson.user.id);",
									"        console.log('Username:', responseJson.user.username);",
									"    }",
									"} else {",
									"    console.log('Authentication failed');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"{{wp_username}}\",\n  \"password\": \"{{wp_password}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/wp-json/draft-api/v1/auth",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"wp-json",
								"draft-api",
								"v1",
								"auth"
							]
						},
						"description": "Authenticate with WordPress credentials to get JWT token.\n\nRequired variables:\n- wp_username: Your WordPress username\n- wp_password: Your WordPress password\n\nThis request will automatically save the JWT token to {{jwt_token}} variable for use in other requests."
					},
					"response": [
						{
							"name": "Successful Authentication",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"username\": \"admin\",\n  \"password\": \"password123\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/wp-json/draft-api/v1/auth",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"wp-json",
										"draft-api",
										"v1",
										"auth"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"token\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE3MDQxNTM2MDAsImlhdCI6MTcwNDA2NzIwMH0.signature\",\n  \"user\": {\n    \"id\": 1,\n    \"username\": \"admin\",\n    \"email\": \"admin@example.com\",\n    \"display_name\": \"Admin\"\n  },\n  \"expires_in\": 86400\n}"
						}
					]
				}
			],
			"description": "Authentication endpoints for getting JWT tokens"
		},
		{
			"name": "Draft Posts",
			"item": [
				{
					"name": "Create Draft Post - Basic",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"My First Draft Post\",\n  \"content\": \"<p>This is the content of my draft post. It will be created with draft status only.</p>\",\n  \"excerpt\": \"A simple draft post created via API\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/wp-json/draft-api/v1/create-draft",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"wp-json",
								"draft-api",
								"v1",
								"create-draft"
							]
						},
						"description": "Create a basic draft post with title, content, and excerpt.\n\nRequires:\n- Valid JWT token in Authorization header\n- User must have 'edit_posts' capability\n\nThe post will always be created with 'draft' status."
					},
					"response": [
						{
							"name": "Successful Creation",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{jwt_token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"title\": \"My First Draft Post\",\n  \"content\": \"<p>This is the content of my draft post.</p>\",\n  \"excerpt\": \"A simple draft post created via API\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/wp-json/draft-api/v1/create-draft",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"wp-json",
										"draft-api",
										"v1",
										"create-draft"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"message\": \"Draft post created successfully\",\n  \"post\": {\n    \"id\": 123,\n    \"title\": \"My First Draft Post\",\n    \"slug\": \"my-first-draft-post\",\n    \"content\": \"<p>This is the content of my draft post.</p>\",\n    \"excerpt\": \"A simple draft post created via API\",\n    \"status\": \"draft\",\n    \"date\": \"2024-01-01 12:00:00\",\n    \"modified\": \"2024-01-01 12:00:00\",\n    \"author\": {\n      \"id\": 1,\n      \"name\": \"Admin\",\n      \"email\": \"admin@example.com\"\n    },\n    \"featured_image\": null,\n    \"categories\": [],\n    \"tags\": [],\n    \"permalink\": \"https://example.com/?p=123\",\n    \"edit_link\": \"https://example.com/wp-admin/post.php?post=123&action=edit\"\n  }\n}"
						}
					]
				},
				{
					"name": "Create Draft Post - Full Featured",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"Advanced Draft Post with All Features\",\n  \"content\": \"<h2>Introduction</h2><p>This is a comprehensive draft post that demonstrates all available features of the secure draft API.</p><h3>Features Included</h3><ul><li>Categories</li><li>Tags</li><li>Featured Image</li><li>Custom Meta Fields</li></ul><p>All posts are created as drafts for security.</p>\",\n  \"excerpt\": \"A comprehensive example showing all API features including categories, tags, featured image, and custom meta fields.\",\n  \"categories\": [\"Technology\", \"WordPress\", \"API\"],\n  \"tags\": [\"jwt\", \"security\", \"draft\", \"api\", \"wordpress\"],\n  \"featured_image\": 456,\n  \"meta\": {\n    \"custom_field_1\": \"Custom value 1\",\n    \"seo_title\": \"Advanced Draft Post - SEO Optimized\",\n    \"priority\": \"high\",\n    \"project_id\": \"PROJ-2024-001\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/wp-json/draft-api/v1/create-draft",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"wp-json",
								"draft-api",
								"v1",
								"create-draft"
							]
						},
						"description": "Create a full-featured draft post with all available options:\n\n- Categories (by name - will be created if they don't exist)\n- Tags\n- Featured image (by attachment ID)\n- Custom meta fields\n\nNote: Replace featured_image ID (456) with an actual attachment ID from your WordPress media library."
					},
					"response": []
				},
				{
					"name": "Get My Draft Posts",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/wp-json/draft-api/v1/my-drafts?per_page=10&page=1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"wp-json",
								"draft-api",
								"v1",
								"my-drafts"
							],
							"query": [
								{
									"key": "per_page",
									"value": "10",
									"description": "Number of posts per page (default: 10)"
								},
								{
									"key": "page",
									"value": "1",
									"description": "Page number (default: 1)"
								}
							]
						},
						"description": "Get the authenticated user's draft posts.\n\nQuery Parameters:\n- per_page: Number of posts per page (optional, default: 10)\n- page: Page number (optional, default: 1)\n\nReturns only the authenticated user's draft posts with pagination information."
					},
					"response": [
						{
							"name": "Successful Response",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{jwt_token}}"
									}
								],
								"url": {
									"raw": "{{base_url}}/wp-json/draft-api/v1/my-drafts?per_page=10&page=1",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"wp-json",
										"draft-api",
										"v1",
										"my-drafts"
									],
									"query": [
										{
											"key": "per_page",
											"value": "10"
										},
										{
											"key": "page",
											"value": "1"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"posts\": [\n    {\n      \"id\": 123,\n      \"title\": \"My First Draft Post\",\n      \"slug\": \"my-first-draft-post\",\n      \"content\": \"<p>This is the content of my draft post.</p>\",\n      \"excerpt\": \"A simple draft post created via API\",\n      \"status\": \"draft\",\n      \"date\": \"2024-01-01 12:00:00\",\n      \"modified\": \"2024-01-01 12:00:00\",\n      \"author\": {\n        \"id\": 1,\n        \"name\": \"Admin\",\n        \"email\": \"admin@example.com\"\n      },\n      \"featured_image\": null,\n      \"categories\": [],\n      \"tags\": [],\n      \"permalink\": \"https://example.com/?p=123\",\n      \"edit_link\": \"https://example.com/wp-admin/post.php?post=123&action=edit\"\n    }\n  ],\n  \"pagination\": {\n    \"total\": 5,\n    \"pages\": 1,\n    \"current_page\": 1,\n    \"per_page\": 10\n  }\n}"
						}
					]
				}
			],
			"description": "Draft post management endpoints (create and read only)"
		},
		{
			"name": "Error Examples",
			"item": [
				{
					"name": "No Authorization Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"This will fail\",\n  \"content\": \"No authorization token provided\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/wp-json/draft-api/v1/create-draft",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"wp-json",
								"draft-api",
								"v1",
								"create-draft"
							]
						},
						"description": "Example of request without authorization token - will return 401 error."
					},
					"response": [
						{
							"name": "401 Unauthorized",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"title\": \"This will fail\",\n  \"content\": \"No authorization token provided\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/wp-json/draft-api/v1/create-draft",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"wp-json",
										"draft-api",
										"v1",
										"create-draft"
									]
								}
							},
							"status": "Unauthorized",
							"code": 401,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"code\": \"no_token\",\n  \"message\": \"Authorization token is required\",\n  \"data\": {\n    \"status\": 401\n  }\n}"
						}
					]
				},
				{
					"name": "Invalid Credentials",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"invalid_user\",\n  \"password\": \"wrong_password\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/wp-json/draft-api/v1/auth",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"wp-json",
								"draft-api",
								"v1",
								"auth"
							]
						},
						"description": "Example of authentication with invalid credentials - will return 401 error."
					},
					"response": [
						{
							"name": "401 Authentication Failed",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"username\": \"invalid_user\",\n  \"password\": \"wrong_password\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/wp-json/draft-api/v1/auth",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"wp-json",
										"draft-api",
										"v1",
										"auth"
									]
								}
							},
							"status": "Unauthorized",
							"code": 401,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"code\": \"authentication_failed\",\n  \"message\": \"Invalid username or password\",\n  \"data\": {\n    \"status\": 401\n  }\n}"
						}
					]
				},
				{
					"name": "Missing Required Field",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"content\": \"Post without title - will fail validation\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/wp-json/draft-api/v1/create-draft",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"wp-json",
								"draft-api",
								"v1",
								"create-draft"
							]
						},
						"description": "Example of request missing required 'title' field - will return 400 error."
					},
					"response": [
						{
							"name": "400 Bad Request",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{jwt_token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"content\": \"Post without title - will fail validation\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/wp-json/draft-api/v1/create-draft",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"wp-json",
										"draft-api",
										"v1",
										"create-draft"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"code\": \"rest_missing_callback_param\",\n  \"message\": \"Missing parameter(s): title\",\n  \"data\": {\n    \"status\": 400,\n    \"params\": [\"title\"]\n  }\n}"
						}
					]
				}
			],
			"description": "Examples of common error scenarios and their responses"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Pre-request script for the entire collection",
					"// You can add global setup logic here if needed"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Global test script for the entire collection",
					"// You can add global test logic here if needed"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "https://dev.moreyeahs.com",
			"description": "Your WordPress site URL (without trailing slash)"
		},
		{
			"key": "wp_username",
			"value": "your_username",
			"description": "Your WordPress username"
		},
		{
			"key": "wp_password",
			"value": "your_password",
			"description": "Your WordPress password"
		},
		{
			"key": "jwt_token",
			"value": "",
			"description": "JWT token (automatically set after authentication)"
		},
		{
			"key": "user_id",
			"value": "",
			"description": "Authenticated user ID (automatically set after authentication)"
		},
		{
			"key": "username",
			"value": "",
			"description": "Authenticated username (automatically set after authentication)"
		}
	]
}